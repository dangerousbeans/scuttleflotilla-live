(function(t){function a(a){for(var s,i,o=a[0],l=a[1],c=a[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(a);while(p.length)p.shift()();return r.push.apply(r,c||[]),e()}function e(){for(var t,a=0;a<r.length;a++){for(var e=r[a],s=!0,o=1;o<e.length;o++){var l=e[o];0!==n[l]&&(s=!1)}s&&(r.splice(a--,1),t=i(i.s=e[0]))}return t}var s={},n={app:0},r=[];function i(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=s,i.d=function(t,a,e){i.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,a){if(1&a&&(t=i(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)i.d(e,s,function(a){return t[a]}.bind(null,s));return e},i.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(a,"a",a),a},i.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=a,o=o.slice();for(var c=0;c<o.length;c++)a(o[c]);var u=l;r.push([1,"chunk-vendors"]),e()})({0:function(t,a){},"034f":function(t,a,e){"use strict";var s=e("64a9"),n=e.n(s);n.a},1:function(t,a,e){t.exports=e("56d7")},10:function(t,a){},11:function(t,a){},12:function(t,a){},1574:function(t,a,e){"use strict";var s=e("cb87"),n=e.n(s);n.a},2:function(t,a){},3:function(t,a){},4:function(t,a){},5:function(t,a){},5078:function(t,a,e){"use strict";var s=e("902c"),n=e.n(s);n.a},"56d7":function(t,a,e){"use strict";e.r(a);e("ac6a"),e("cadf"),e("551c"),e("f751"),e("097d");var s=e("a026"),n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},r=[],i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{staticClass:"navbar navbar-expand-sm navbar-dark bg-dark"},[t._m(0),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarTogglerDemo01"}},[e("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("◎")]),t._m(1),e("ul",{staticClass:"navbar-nav ml-auto mt-2 mt-lg-0"},[e("li",{staticClass:"nav-item"},[e("router-link",{attrs:{to:"/profile"}},[e("img",{staticStyle:{width:"23px",margin:"-10"},attrs:{src:t.avatar,alt:"Profile image"}})])],1)])],1)])},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ul",{staticClass:"navbar-nav mr-auto mt-2 mt-lg-0"},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link",attrs:{href:"#"}})])])}],l=(e("b54a"),e("7f7f"),e("3e1e")),c=e.n(l);c.a.paraMap=e("a7b3");var u=e("8654"),d=u.isBlob,p=e("50ce").create;var m={post_as:function(t,a,e,s){t.getLatest(a.id,(function(n,r){var i=r?{id:r.key,sequence:r.value.sequence,timestamp:r.value.timestamp,queue:[]}:{id:null,sequence:null,timestamp:null,queue:[]};t.add(p(i,a,null,e,Date.now()),(function(t,a){if(t)throw t;s&&s()}))}))},related:function(t,a,e){c()(t.backlinks.read({live:!0,query:[{$filter:{dest:a,value:{content:{type:"post"}}}}]}),c.a.filter((function(t){return!t.sync})),c.a.drain((function(t){e(null,t)})))},countStream:function(t,a,e){c()(t.backlinks.read({live:!0,query:[{$filter:{dest:a,value:{content:{type:"vote",vote:{link:a}}}}}]}),c.a.filter((function(t){return!t.sync})),c.a.drain((function(t){e(null,t)})))},displayName:function(t,a,e){var s={},n={limit:1,reverse:!0,query:[{$filter:{value:{author:a,content:{type:"about",about:a,name:{$is:"string"}}},timestamp:{$gt:0}}},{$map:{name:["value","content","name"]}}]};c()(t.query.read(n),c.a.collect((function(t,n){var r;t?e(t):(r=n&&n.length?n[0].name:a,s.authorName=r,e(null,s))})))},avatar:function(t,a,e){var s={reverse:!0,query:[{$filter:{value:{author:a,content:{type:"about",about:a,image:{$truthy:!0}},timestamp:{$gt:0}}}},{$map:{image:["value","content","image"]}}]};c()(t.query.read(s),c.a.map((function(t){return"string"===typeof t.image?t.image:t.image.link})),c.a.filter((function(t){return d(t)})),c.a.take(1),c.a.collect((function(t,a){t?e(t):a&&a.length?e(null,a[0]):e(null,null)})))}},h=e("91d2"),v=e.n(h),f={name:"site-navbar",data:function(){return{avatar:"https://via.placeholder.com/90x90",author:"..."}},mounted:function(){var t=this;this.$ssb.then((function(a){m.displayName(a,JSON.parse(localStorage.keys).id,t.name_loaded),m.avatar(a,JSON.parse(localStorage.keys).id,t.avatar_loaded)}))},methods:{name_loaded:function(t,a){if(this.$data.author=a,"https://via.placeholder.com/90x90"==this.$data.avatar){var e=new v.a(300,JSON.parse(localStorage.keys).id).getImage();this.$data.avatar=e}},avatar_loaded:function(t,a){a&&(this.$data.avatar="http://ssb.guild.land/blobs/get/"+a)}}},g=f,b=e("2877"),_=Object(b["a"])(g,i,o,!1,null,"6fa9493a",null),y=_.exports,$={name:"app",components:{"site-navbar":y}},w=$,C=(e("034f"),Object(b["a"])(w,n,r,!1,null,null,null)),x=C.exports,k=e("8c4f"),S=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8",attrs:{id:""}},[e("div",{staticClass:"card-body scroll whitebg"},[e("TileInfo"),t._m(0),e("br"),e("Messages",{staticStyle:{"max-height":"100%"}})],1)]),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("Shared Funds")]),e("p",{staticClass:"card-text"},[t._v("\n             Ξ "+t._s((t.balance/1e18).toFixed(4))+" Ether\n          ")]),e("a",{staticClass:"card-link",attrs:{href:"https://etherscan.io/address/0x9f2E66Bd2354f37793C5f75516B2371190ce68f0"}},[t._v("Details")])])]),e("Helpers")],1)])])},O=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("h4",[e("small",[t._v("Live SSB Feed of the Scuttlebutt Solarpunk Fleet")])])}],N=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[t.loading?e("div",{staticClass:"spinner-border",attrs:{label:"Spinning"}}):t._e(),t._l(t.messages,(function(a){return e("Message",{key:a.key,attrs:{message:a,x:t.$props.x,y:t.$props.y}})}))],2)},j=[],P=(e("55dd"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{width:"100%"}},[e("div",{staticClass:"media mt-12 col-sm-12 message"},[e("router-link",{attrs:{to:{name:"ViewProfile",params:{id:t.message.value.author}}}},[e("img",{staticClass:"pr-3 rounded ",staticStyle:{"max-width":"60px"},attrs:{src:t.avatar}})]),e("div",{staticClass:"media-body"},[e("h5",{staticClass:"mt-0 text-truncate"},[e("router-link",{staticClass:"text-dark font-weight-bold",attrs:{to:{name:"ViewProfile",params:{id:t.message.value.author}}}},[t._v("\n            "+t._s(t.$data.author.authorName)+"  \n          ")]),e("span",{staticClass:"text-muted"},[t._l(t.message.value.content.tags,(function(a){return e("span",[t._v("\n              "+t._s(a)+"\n            ")])})),t.message.value.content.x&&t.message.value.content.y?e("span",[t._v("\n              "+t._s(t.message.value.content.x)+"/"+t._s(t.message.value.content.y)+"\n            ")]):t._e(),t.message.value.content.channel?e("span",{staticClass:"text-dark"},[t._v("#"+t._s(t.message.value.content.channel))]):t._e()],2)],1),e("div",{staticClass:"tweet-text"},[e("read-more",{attrs:{"more-str":"[more]","less-str":"[less]","max-chars":400,text:t.textmd}})],1),e("div",{staticClass:"tweet-footer"},[e("a",{staticClass:"tweet-footer-btn",on:{click:t.likeClick}},[e("eva-icon",{attrs:{name:"heart-outline",animation:"pulse"}}),t.likes.length>0?e("span",[t._v(t._s(t.likes.length))]):t._e()],1)]),e("div",{staticClass:"float-right text-muted small"},[t.message.value.timestamp?e("timeago",{attrs:{datetime:t.message.value.timestamp,"auto-update":60}}):t._e()],1),e("container",[t._l(t.related,(function(t){return e("small-message",{attrs:{message:t,child:!0}})})),t.related_overflow.length>0&&!t.showOverflow?e("a",{staticClass:"showAll",attrs:{href:"javascript:void(0);"},on:{click:function(a){t.showOverflow=!t.showOverflow}}},[t._v("["+t._s(t.related_overflow.length)+" More Replies]")]):t._e(),t._l(t.related_overflow,(function(a){return t.showOverflow?e("small-message",{attrs:{message:a,child:!0}}):t._e()}))],2)],1)],1)])}),E=[],I=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{width:"100%"}},[e("div",{staticClass:"media mt-12 col-sm-12 message"},[e("router-link",{attrs:{alt:t.author.authorName,to:{name:"ViewProfile",params:{id:t.message.value.author}}}},[e("img",{staticClass:"pr-3 rounded ",staticStyle:{"max-width":"45px"},attrs:{src:t.avatar}})]),e("div",{staticClass:"media-body"},[e("div",{staticClass:"tweet-text"},[e("read-more",{attrs:{"more-str":"[more]","less-str":"[less]","max-chars":400,text:t.textmd}})],1),e("div",{staticClass:"float-right text-muted small"},[t.message.value.timestamp?e("timeago",{attrs:{datetime:t.message.value.timestamp,"auto-update":60}}):t._e()],1)])],1)])},M=[];c.a.paraMap=e("a7b3");var J=e("90ce"),U={name:"message",props:{message:{},x:String,y:String,child:Boolean},data:function(){return{avatar:"https://via.placeholder.com/90x90",author:"...",textmd:"...",likes:[],related:[],root:null,branch:null,replies:0,showRaw:!1}},methods:{name_loaded:function(t,a){if(this.$data.author=a,"https://via.placeholder.com/90x90"==this.$data.avatar){var e=new v.a(300,this.message.value.author).getImage();this.$data.avatar=e}},avatar_loaded:function(t,a){a&&(this.$data.avatar="http://ssb.guild.land/blobs/get/"+a)},like_loaded:function(t,a){this.$data.likes.push(a)},likeClick:function(){var t=this;this.$ssb.then((function(a){var e=parseInt(t.$props.x),s=parseInt(t.$props.y),n={type:"vote",x:e,y:s,channel:t.message.value.content.channel,tags:t.message.value.content.tags,vote:{value:1,link:t.message.key}};m.post_as(a,JSON.parse(localStorage.keys),n)}))}},mounted:function(){var t=this;this.$data.textmd=J.block(this.message.value.content.text,{toUrl:function(t){return"http://ssb.guild.land/blobs/get/"+t}}),this.$ssb.then((function(a){m.displayName(a,t.message.value.author,t.name_loaded),m.avatar(a,t.message.value.author,t.avatar_loaded),m.countStream(a,t.message.key,t.like_loaded)}))}},T=U,L=(e("5078"),Object(b["a"])(T,I,M,!1,null,null,null)),F=L.exports;c.a.paraMap=e("a7b3");var q,D=e("90ce"),H={name:"message",props:{message:{},x:String,y:String,child:Boolean},components:{SmallMessage:F},data:function(){return{avatar:"https://via.placeholder.com/90x90",author:"...",textmd:"...",likes:[],related:[],related_overflow:[],root:null,branch:null,replies:0,showRaw:!1,showOverflow:!1}},methods:{name_loaded:function(t,a){if(this.$data.author=a,"https://via.placeholder.com/90x90"==this.$data.avatar){var e=new v.a(300,this.message.value.author).getImage();this.$data.avatar=e}},related_loaded:function(t,a){void 0==this.$data.related.length||this.$data.related.length<3?this.$data.related.push(a):this.$data.related_overflow.push(a)},avatar_loaded:function(t,a){a&&(this.$data.avatar="http://ssb.guild.land/blobs/get/"+a)},like_loaded:function(t,a){this.$data.likes.push(a)},previous_loaded:function(t,a){console.log("previous_loaded",a),this.$data.branch=a},likeClick:function(){var t=this;this.$ssb.then((function(a){var e=parseInt(t.$props.x),s=parseInt(t.$props.y),n={type:"vote",x:e,y:s,channel:t.message.value.content.channel,tags:t.message.value.content.tags,vote:{value:1,link:t.message.key}};m.post_as(a,JSON.parse(localStorage.keys),n)}))}},mounted:function(){var t=this;this.$data.textmd=D.block(this.message.value.content.text,{toUrl:function(t){return"http://ssb.guild.land/blobs/get/"+t}}),this.$ssb.then((function(a){m.displayName(a,t.message.value.author,t.name_loaded),m.avatar(a,t.message.value.author,t.avatar_loaded),m.countStream(a,t.message.key,t.like_loaded),t.child||m.related(a,t.message.key,t.related_loaded)}))}},A=H,B=(e("f87e"),Object(b["a"])(A,P,E,!1,null,null,null)),R=B.exports,V=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-group media mt-2 col-sm-12 message"},[e("router-link",{attrs:{to:{name:"Profile"}}},[e("img",{staticClass:"pr-3 rounded ",staticStyle:{"max-width":"60px"},attrs:{src:t.avatar}})]),e("form",{on:{submit:function(a){return a.preventDefault(),t.post(a)}}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control",attrs:{autofocus:"",placeholder:"New message at this location"},domProps:{value:t.message},on:{input:[function(a){a.target.composing||(t.message=a.target.value)},function(a){t.writing=!0}],click:function(a){t.writing=!0},blur:function(a){0==t.message.length&&(t.writing=!1)}}}),t.writing?e("vue-tags-input",{attrs:{tags:t.tags},on:{"tags-changed":function(a){return t.tags=a}},model:{value:t.tag,callback:function(a){t.tag=a},expression:"tag"}}):t._e(),t.writing?e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit"}},[t._v("Post")]):t._e()],1)],1)},z=[],G=e("c7a0"),Q={name:"composer",props:{x:String,y:String},components:{VueTagsInput:G["VueTagsInput"]},data:function(){return{avatar:"https://via.placeholder.com/90x90",message:"",writing:!1,tag:"",tags:[]}},mounted:function(){var t=this;this.$ssb.then((function(a){m.avatar(a,JSON.parse(localStorage.keys).id,t.avatar_loaded)}))},methods:{avatar_loaded:function(t,a){if("https://via.placeholder.com/90x90"==this.$data.avatar){var e=new v.a(300,JSON.parse(localStorage.keys).id).getImage();this.$data.avatar=e}a&&(this.$data.avatar="http://ssb.guild.land/blobs/get/"+a)},post:function(t){var a=this;if(this.$data.message){var e=parseInt(this.$props.x),s=parseInt(this.$props.y);this.$ssb.then((function(t){var n={type:"post",text:a.$data.message,x:e,y:s};a.$data.tags.length>0&&(n.tags=a.$data.tags.map((function(t){return t.text}))),m.post_as(t,JSON.parse(localStorage.keys),n),a.$emit("new_post"),a.$data.message=""}))}}}},X=Q,Z=Object(b["a"])(X,V,z,!1,null,"6615285c",null),K=Z.exports,Y=e("3e1e"),W=(e("90de"),e("8c62"));function tt(t,a){var e=t.value.timestamp,s=a.value.timestamp;return e<s?1:e>s?-1:0}var at={name:"Messages",components:{Message:R,Composer:K},data:function(){return{ssb:"",messages:[],identity:"...",loading:!0}},props:{msg:String,x:String,y:String,this_tile_tags:Array},computed:{position:function(){return this.x,this.y}},methods:{new_post:function(){this.$emit("new_post")},message_arrived:function(t){t.sync?this.$data.loading=!1:(this.$data.messages.push(t),this.$data.messages.sort(tt))},name_loaded:function(t,a){this.$data.identity=a.authorName},fetch_messages:function(){var t=this;this.$data.messages=[],this.$data.loading=!0,this.$ssb.then((function(a){t.$data.ssb=a,m.displayName(a,JSON.parse(localStorage.keys).id,t.name_loaded);var e,s=parseInt(t.$props.x),n=parseInt(t.$props.y);t.$data.loading=!1,e={limit:500,reverse:!0,live:!0,query:[{$filter:{value:{content:{type:"post",channel:"scuttleflotilla",root:{$not:!0},recps:{$not:!0}}}}}]};var r=a.geospatial.read,i=r(e);Y(i,q=W(),Y.drain(t.message_arrived))}))}},watch:{position:function(){q.abort(),this.fetch_messages()}},mounted:function(){this.fetch_messages()}},et=at,st=(e("5932"),Object(b["a"])(et,N,j,!1,null,null,null)),nt=st.exports,rt=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},it=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{},[e("h3",{staticClass:"card-title"},[e("span",{staticClass:"font-weight-bold"},[t._v("⛵")]),t._v("ScuttleFlotilla")])])}],ot={name:"tile_info",props:["x","y","active_tags"],computed:{status:function(){return this.scuttlecity()?"ScuttleCity":"Unoccupied"}},methods:{scuttlecity:function(){return 4==this.$route.params.x&&21==this.$route.params.y||!this.$route.params.x||!this.$route.params.y}}},lt=ot,ct=Object(b["a"])(lt,rt,it,!1,null,null,null),ut=ct.exports,dt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v("Alchemist Token Holders: "+t._s(Object.keys(t.balances).length-1))]),e("p",{staticClass:"card-text"},t._l(Object.keys(t.balances),(function(a){return null!=t.balances?e("Helper",{key:a.id,attrs:{helper:a}}):t._e()})),1)])])},pt=[],mt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"media mt-12 col-sm-12 message"},[e("img",{staticClass:"pr-3 rounded ",staticStyle:{"max-width":"60px"},attrs:{src:t.avatar}}),e("div",{staticClass:"media-body"},[e("h5",{staticClass:"mt-0 text-truncate"},[t._v("\n          "+t._s(t.$data.author.authorName)+"  \n          \n        ")])])])])},ht=[];c.a.paraMap=e("a7b3");var vt={name:"helper",props:{helper:null},data:function(){return{avatar:"https://via.placeholder.com/90x90",author:"..."}},methods:{name_loaded:function(t,a){if(this.$data.author=a,"https://via.placeholder.com/90x90"==this.$data.avatar){var e=new GIXI(300,this.helper).getImage();this.$data.avatar=e}},avatar_loaded:function(t,a){a&&(this.$data.avatar="http://ssb.guild.land/blobs/get/"+a)}},mounted:function(){var t=this;this.$ssb.then((function(a){m.displayName(a,t.helper,t.name_loaded),m.avatar(a,t.helper,t.avatar_loaded)}))}},ft=vt,gt=Object(b["a"])(ft,mt,ht,!1,null,"66c964ea",null),bt=gt.exports;c.a.paraMap=e("a7b3");e("90ce");var _t=e("a938"),yt={name:"helpers",data:function(){return{balances:null}},components:{Helper:bt},methods:{balances_loaded:function(t,a){this.$data.balances=a}},mounted:function(){var t=this;this.$ssb.then((function(a){var e=_t.init(a);e.getCurrencyBalances("🔷",t.balances_loaded)}))}},$t=yt,wt=(e("9f49"),Object(b["a"])($t,dt,pt,!1,null,null,null)),Ct=wt.exports,xt=e("e11e"),kt=e("a40a"),St=e("4e2b6"),Ot=e("f60f"),Nt=e("31dc"),jt=(e("3e1e"),e("90de"),{components:{Messages:nt,TileInfo:ut,Helpers:Ct,LTileLayer:kt["a"],LMarker:St["a"],LPopup:Ot["a"],LTooltip:Nt["a"]},data:function(){return{zoom:3,center:Object(xt["latLng"])(-37.1441077,174.3789877),url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',withPopup:Object(xt["latLng"])(47.41322,-1.219482),withTooltip:Object(xt["latLng"])(47.41422,-1.250482),currentZoom:3.5,currentCenter:Object(xt["latLng"])(-37.1441077,174.3789877),showParagraph:!1,mapOptions:{zoomSnap:.5},showMap:!0,balance:"-"}},methods:{zoomUpdate:function(t){this.currentZoom=t},centerUpdate:function(t){this.currentCenter=t},showLongText:function(){this.showParagraph=!this.showParagraph},innerClick:function(){alert("Click!")},balance_loaded:function(t){this.$data.balance=t.result}},mounted:function(){this.$nextTick((function(){}));var t=e("e19e").init("32UFFXZPZBPRJPEY2IKU3QE94WQMN2HNIF"),a=t.account.balance("0x9f2E66Bd2354f37793C5f75516B2371190ce68f0");a.then(this.balance_loaded),this.$ssb.then((function(t){var a="@+COav7rGgSXqV36bsgYJK1EHtUuk9SvojPFGdIzJLlA=.ed25519",e=JSON.parse(localStorage.keys).id;t.friends.isFollowing({source:e,dest:a},(function(e,s){s||m.post_as(t,JSON.parse(localStorage.keys),{type:"contact",contact:a,following:!0},(function(){}))}))}))}}),Pt=jt,Et=(e("8b71a"),Object(b["a"])(Pt,S,O,!1,null,null,null)),It=Et.exports,Mt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"fb-profile"},[e("div",{staticClass:"fb-image-profile card vue-avatar-cropper-demo text-center"},[e("div",{staticClass:"card-body"},[e("img",{staticClass:"card-img avatar",attrs:{src:t.avatar}}),t._m(0),e("h5",{staticClass:"card-title mb-0"},[t._v(t._s(t.author.authorName))])]),e("div",{staticClass:"card-footer text-muted",domProps:{innerHTML:t._s(t.message)}}),e("avatar-cropper",{attrs:{trigger:"#pick-avatar"},on:{uploading:t.handleUploading,uploaded:t.handleUploaded,completed:t.handleCompleted,error:t.handlerError}})],1),e("form",{on:{submit:function(a){return a.preventDefault(),t.handleSubmit(a)}}},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.new_name,expression:"new_name"}],staticClass:"form-control",attrs:{type:"name",id:"name",placeholder:"Enter name"},domProps:{value:t.new_name},on:{input:function(a){a.target.composing||(t.new_name=a.target.value)}}})]),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Update")])])]),e("div")])},Jt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-img-overlay"},[e("button",{staticClass:"btn btn-primary btn-sm",attrs:{id:"pick-avatar"}},[t._v("Select an new image")])])}],Ut=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"avatar-cropper"},[t.dataUrl?e("div",{staticClass:"avatar-cropper-overlay"},[e("div",{staticClass:"avatar-cropper-mark"},[e("a",{staticClass:"avatar-cropper-close",attrs:{href:"javascript:;"},on:{click:t.destroy}},[t._v("×")])]),e("div",{staticClass:"avatar-cropper-container"},[e("div",{staticClass:"avatar-cropper-image-container"},[e("img",{ref:"img",attrs:{src:t.dataUrl,alt:""},on:{load:function(a){return a.stopPropagation(),t.createCropper(a)}}})]),e("div",{staticClass:"avatar-cropper-footer"},[e("button",{staticClass:"avatar-cropper-btn",domProps:{textContent:t._s(t.labels.cancel)},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.destroy(a)}}},[t._v("Cancel")]),e("button",{staticClass:"avatar-cropper-btn",domProps:{textContent:t._s(t.labels.submit)},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.submit(a)}}},[t._v("Submit")])])])]):t._e(),e("input",{ref:"input",staticClass:"avatar-cropper-img-input",attrs:{accept:t.mimes,type:"file"}})])},Tt=[],Lt=e("7618"),Ft=(e("c5f6"),e("6107"),e("bab4")),qt=e.n(Ft),Dt=e("acb4"),Ht={props:{trigger:{type:[String,Element],required:!0},uploadHandler:{type:Function},blobHandler:{type:Function},uploadUrl:{type:String},requestMethod:{type:String,default:"POST"},uploadHeaders:{type:Object},uploadFormName:{type:String,default:"file"},uploadFormData:{type:Object,default:function(){return{}}},cropperOptions:{type:Object,default:function(){return{aspectRatio:1,autoCropArea:1,viewMode:1,movable:!1,zoomable:!1}}},outputOptions:{type:Object},outputMime:{type:String,default:null},outputQuality:{type:Number,default:.9},mimes:{type:String,default:"image/png, image/gif, image/jpeg, image/bmp, image/x-icon"},labels:{type:Object,default:function(){return{submit:"submit",cancel:"cancel"}}}},data:function(){return{cropper:void 0,dataUrl:void 0,filename:void 0}},methods:{destroy:function(){this.cropper.destroy(),this.$refs.input.value="",this.dataUrl=void 0},submit:function(){this.$emit("submit"),this.uploadImage(),this.destroy()},pickImage:function(t){this.$refs.input.click(),t.preventDefault(),t.stopPropagation()},createCropper:function(){this.cropper=new qt.a(this.$refs.img,this.cropperOptions)},uploadImage:function(){var t=this,a=this.cropper.getCroppedCanvas(this.outputOptions).toDataURL();this.$emit("uploading");var e=Dt.parse(a);this.$ssb.then((function(a){c()(c.a.once(e.data),a.blobs.add((function(s,n){if(s)return alert(s.stack);var r={link:n,size:e.data.length,type:e.mimetype,width:512,height:512};m.post_as(a,JSON.parse(localStorage.keys),{type:"about",about:JSON.parse(localStorage.keys).id,image:r},(function(a,e){t.$emit("completed"),t.$emit("uploaded")}))})))})),this.outputMime,this.outputQuality}},mounted:function(){var t=this,a="object"==Object(Lt["a"])(this.trigger)?this.trigger:document.querySelector(this.trigger);a?a.addEventListener("click",this.pickImage):this.$emit("error","No avatar make trigger found.","user");var e=this.$refs.input;e.addEventListener("change",(function(){if(null!=e.files&&null!=e.files[0]){var a=new FileReader;a.onload=function(a){t.dataUrl=a.target.result},a.readAsDataURL(e.files[0]),t.filename=e.files[0].name||"unknown",t.mimeType=t.mimeType||e.files[0].type,t.$emit("changed",e.files[0],a)}}))}},At=Ht,Bt=(e("5f48"),Object(b["a"])(At,Ut,Tt,!1,null,null,null)),Rt=Bt.exports;c.a.paraMap=e("a7b3");e("90ce");var Vt={name:"profile",components:{AvatarCropper:Rt},data:function(){return{avatar:"https://via.placeholder.com/90x90",author:"...",new_name:"",new_key:"",key:JSON.parse(localStorage.keys),message:"",user:{id:1}}},methods:{uploadHandler:function(t){},handleUploading:function(t,a){this.message="uploading..."},handleUploaded:function(){var t=this;this.$ssb.then((function(a){m.avatar(a,JSON.parse(localStorage.keys).id,t.avatar_loaded)})),this.message="saved"},handleCompleted:function(t,a,e){this.message="upload completed."},handlerError:function(t,a,e){this.message="Oops! Something went wrong..."+t},name_loaded:function(t,a){if(this.$data.author=a,"https://via.placeholder.com/90x90"==this.$data.avatar){var e=new v.a(300,JSON.parse(localStorage.keys).id).getImage();this.$data.avatar=e}},avatar_loaded:function(t,a){a&&(this.$data.avatar="http://ssb.guild.land/blobs/get/"+a)},handleSubmit:function(){var t=this;console.log("submit"),""!=this.$data.new_name&&this.$data.new_name!=this.$data.author.authorName&&(console.log("valid changes, post to ssb"),this.$ssb.then((function(a){var e={type:"about",about:t.$data.key.id,name:t.$data.new_name};console.log("posting",e),m.post_as(a,JSON.parse(localStorage.keys),e),t.$data.new_name=""})))}},mounted:function(){var t=this;this.$ssb.then((function(a){m.displayName(a,JSON.parse(localStorage.keys).id,t.name_loaded),m.avatar(a,JSON.parse(localStorage.keys).id,t.avatar_loaded)}))}},zt=Vt,Gt=(e("bca8"),Object(b["a"])(zt,Mt,Jt,!1,null,"95690a3e",null)),Qt=Gt.exports,Xt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"fb-profile"},[e("div",{staticClass:"fb-image-profile card vue-avatar-cropper-demo text-center"},[e("div",{staticClass:"card-body"},[e("img",{staticClass:"card-img avatar",attrs:{src:t.avatar}}),e("div",{staticClass:"card-img-overlay"}),e("h5",{staticClass:"card-title mb-0"},[t._v(t._s(t.author.authorName))])])])]),t._m(0)])},Zt=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("p"),e("h1",{staticClass:"lead"},[t._v("No guilds")]),e("p")])}];c.a.paraMap=e("a7b3");e("90ce");var Kt={name:"profile",props:["id"],data:function(){return{avatar:"https://via.placeholder.com/90x90",author:"..."}},methods:{name_loaded:function(t,a){if(this.$data.author=a,"https://via.placeholder.com/90x90"==this.$data.avatar){var e=new v.a(300,this.$props.id).getImage();this.$data.avatar=e}},avatar_loaded:function(t,a){a&&(this.$data.avatar="http://ssb.guild.land/blobs/get/"+a)}},mounted:function(){var t=this;this.$ssb.then((function(a){m.displayName(a,t.$props.id,t.name_loaded),m.avatar(a,t.$props.id,t.avatar_loaded)}))}},Yt=Kt,Wt=(e("1574"),Object(b["a"])(Yt,Xt,Zt,!1,null,"47c58bcc",null)),ta=Wt.exports,aa=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},ea=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container"},[s("div",{staticClass:"fb-profile"},[s("div",{staticClass:"fb-image-profile card"},[s("div",{staticClass:"card-body"},[s("h4",{staticClass:"card-title mb-0"},[t._v("The Scuttleflotilla Solarpunk Fleet")]),s("img",{attrs:{src:e("cdda")}}),s("p",[s("strong",[t._v("Alchemist")]),t._v(" is a support vessel for everyone helping create a better solarpunk world\n        ")]),s("p",[t._v("\n          We offer, for those who help fund, fix or run the boat:\n        ")]),s("ul",[s("li",[t._v("\n            Free place to stay - internet, food and power\n          ")]),s("li",[t._v("\n            Free (slow) international transport wherever the group has decidede the boat is going to go\n          ")]),s("li",[t._v("\n            A floating temporary venue for ~21 people\n          ")]),s("li",[t._v("\n            A say in where the boat sails to next!\n          ")]),s("li",[t._v("\n            To become an alchemy token holder\n          ")])]),s("p")])])])])}],sa={name:"about",data:function(){return{}}},na=sa,ra=Object(b["a"])(na,aa,ea,!1,null,"299f3061",null),ia=ra.exports;s["default"].use(k["a"]);var oa=new k["a"]({routes:[{path:"/",name:"Home",component:It},{path:"/post/:id",name:"View Post",component:nt},{path:"/about",name:"About",component:ia},{path:"/profile",name:"Profile",component:Qt},{path:"/profile/:id",name:"ViewProfile",component:ta,props:!0}]}),la=e("8682"),ca=e("f684"),ua=e("5f5b"),da=(e("f9e3"),e("2dd8"),e("0665")),pa=e.n(da),ma=e("fd37"),ha=e("2699");e("6cc5");s["default"].use(la["a"],{locales:{en:e("52cf")}}),s["default"].use(ca["a"]),s["default"].use(ua["a"]),s["default"].use(pa.a),s["default"].use(ma["a"],{keys:localStorage.keys,remote:"wss://ssb.guild.land/~shs:+COav7rGgSXqV36bsgYJK1EHtUuk9SvojPFGdIzJLlA=",manifest:{geospatial:{read:"source",stream:"source",get:"async"}}}),s["default"].config.productionTip=!1,s["default"].component("l-map",ha["a"]),window.LMap=ha["a"],s["default"].component("l-tile-layer",kt["a"]),s["default"].component("l-marker",St["a"]),delete xt["Icon"].Default.prototype._getIconUrl,xt["Icon"].Default.mergeOptions({iconRetinaUrl:e("584d"),iconUrl:e("6397"),shadowUrl:e("e2b9")}),new s["default"]({router:oa,template:"<app/>",components:{app:x}}).$mount("#app")},5932:function(t,a,e){"use strict";var s=e("bdba"),n=e.n(s);n.a},"5dc2":function(t,a,e){},"5f48":function(t,a,e){"use strict";var s=e("7b95"),n=e.n(s);n.a},6:function(t,a){},"64a9":function(t,a,e){},7:function(t,a){},"7b95":function(t,a,e){},8:function(t,a){},"8b71a":function(t,a,e){"use strict";var s=e("e3a2"),n=e.n(s);n.a},9:function(t,a){},"902c":function(t,a,e){},"9e3c":function(t,a,e){},"9f49":function(t,a,e){"use strict";var s=e("5dc2"),n=e.n(s);n.a},bca8:function(t,a,e){"use strict";var s=e("d09a"),n=e.n(s);n.a},bdba:function(t,a,e){},cb87:function(t,a,e){},cdda:function(t,a,e){t.exports=e.p+"img/alchemist.9d3bec57.png"},d09a:function(t,a,e){},e3a2:function(t,a,e){},f87e:function(t,a,e){"use strict";var s=e("9e3c"),n=e.n(s);n.a}});
//# sourceMappingURL=app.a95dc59d.js.map